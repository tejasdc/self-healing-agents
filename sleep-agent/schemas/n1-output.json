{
  "type": "object",
  "properties": {
    "sessions_scanned": { "type": "integer" },
    "data_sources": {
      "type": "object",
      "properties": {
        "braintrust_available": { "type": "boolean" },
        "local_jsonl_scanned": { "type": "integer" }
      }
    },
    "token_usage": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "session_id": { "type": "string" },
          "total_tokens": { "type": "integer" },
          "prompt_tokens": { "type": "integer" },
          "completion_tokens": { "type": "integer" },
          "llm_calls": { "type": "integer" },
          "anomaly": { "type": "boolean" }
        },
        "required": ["session_id", "total_tokens"]
      }
    },
    "frustration_clusters": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "cluster_id": { "type": "string" },
          "topic": { "type": "string" },
          "occurrences": { "type": "integer" },
          "session_ids": { "type": "array", "items": { "type": "string" } },
          "example_quotes": { "type": "array", "items": { "type": "string" } },
          "severity": { "type": "string", "enum": ["low", "medium", "high"] }
        },
        "required": ["cluster_id", "topic", "occurrences"]
      }
    },
    "repeated_commands": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "command": { "type": "string" },
          "count": { "type": "integer" },
          "session_ids": { "type": "array", "items": { "type": "string" } }
        },
        "required": ["command", "count"]
      }
    },
    "artifact_utilization": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "artifact_id": { "type": "string" },
          "artifact_type": { "type": "string" },
          "name": { "type": "string" },
          "utilization_count": { "type": "integer" },
          "evidence": { "type": "string" }
        },
        "required": ["artifact_id", "utilization_count"]
      }
    },
    "error_patterns": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "error_type": { "type": "string" },
          "count": { "type": "integer" },
          "session_ids": { "type": "array", "items": { "type": "string" } },
          "example": { "type": "string" }
        },
        "required": ["error_type", "count"]
      }
    }
  },
  "required": ["sessions_scanned", "token_usage", "frustration_clusters", "repeated_commands", "artifact_utilization", "error_patterns"]
}
